<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Holographic Earth HUD</title>

    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet" />

    <style>
        /* =============================
           GLOBAL UI / BACKGROUND
           ============================= */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;

            /* Ïã§Ï†ú Ïö∞Ï£º ÎäêÎÇå ÏÉâÍ∞ê Í∞ïÌôî */
            background: radial-gradient(circle at 30% 30%, #0a0a1f 0%, #000015 45%, #000000 100%);
            font-family: 'Orbitron', sans-serif;
            color: #00ffff;
        }

        /* =============================
           MAP CANVAS
           ============================= */
        #map {
            position: absolute;
            inset: 0;
            filter: brightness(1.2) contrast(1.25) saturate(1.25);
        }

        /* =============================
           REMOVE ALL MAPBOX DEFAULT UI
           ============================= */
        .mapboxgl-ctrl-top-left,
        .mapboxgl-ctrl-top-right,
        .mapboxgl-ctrl-bottom-left,
        .mapboxgl-ctrl-bottom-right {
            display: none !important;
        }

        /* =============================
           HUD GRID LINES
           ============================= */
        .hud-grid {
            position: absolute;
            inset: 0;
            background-image:
                    linear-gradient(rgba(0,255,255,0.05) 1px, transparent 1px),
                    linear-gradient(90deg, rgba(0,255,255,0.05) 1px, transparent 1px);
            background-size: 80px 80px;
            pointer-events: none;
        }

        /* =============================
           COORD DISPLAY
           ============================= */
        .hud-coords {
            position: absolute;
            bottom: 20px;
            right: 30px;
            font-size: 0.9rem;
            text-shadow: 0 0 6px #00ffff;
        }

        /* =============================
           NEON MARKER
           ============================= */
        .neon-marker {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            position: relative;
            cursor: pointer;
        }

        .neon-ring {
            position: absolute;
            top: -5px;
            left: -5px;
            width: 30px;
            height: 30px;
            border: 2px solid rgba(0,255,255,0.6);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0,255,255,0.8);
            animation: spin 4s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to   { transform: rotate(360deg); }
        }

        /* =============================
           POPUP STYLE
           ============================= */
        .mapboxgl-popup-content {
            background: rgba(0, 20, 30, 0.92);
            border: 1px solid #00ffff;
            border-radius: 10px;
            color: #00ffff;
            font-size: 0.9rem;
            box-shadow: 0 0 12px #00ffff;
            text-shadow: 0 0 6px #00ffff;
            padding: 12px 16px;
        }
    </style>
</head>

<body>
<div id="map"></div>
<div class="hud-grid"></div>
<div class="hud-coords" id="coords">Lat: 0 | Lng: 0</div>

<script>
    /* ======================================================
       INITIALIZE MAP
       ====================================================== */
    mapboxgl.accessToken = 'pk.eyJ1Ijoic3djMTEwMSIsImEiOiJjbWhrNDRhYjcxbGNiMm5xMXdqbXFhNHU5In0.THY7zAccvZppLBVTe7XU3w';

    const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/dark-v11',
        center: [0, 20],
        zoom: 1.5,
        pitch: 45,
        bearing: 0,
        antialias: true,
        dragRotate: true,
        dragPan: true,
        attributionControl: false
    });

    /* ======================================================
       HOLOGRAPHIC FOG (Ïö∞Ï£º ‚Üí ÎåÄÍ∏∞ ‚Üí ÏßÄÌëú)
       ====================================================== */
    function setHolographicFog() {
        map.setFog({
            color: "rgb(0, 40, 70)",
            "high-color": "rgb(0, 210, 255)",
            "space-color": "rgb(2, 2, 18)",
            "horizon-blend": 0.4,
            "star-intensity": 0.55
        });
    }

    /* ======================================================
       3D NEON BUILDINGS
       ====================================================== */
    function addNeonBuildings() {
        const layers = map.getStyle().layers;
        const labelLayer = layers.find(l => l.type === "symbol");

        map.addLayer({
            id: "3d-buildings",
            source: "composite",
            "source-layer": "building",
            filter: ["==", "extrude", "true"],
            type: "fill-extrusion",
            minzoom: 10,
            paint: {
                "fill-extrusion-color": [
                    "interpolate", ["linear"], ["get", "height"],
                    0, "#00bcd4",
                    60, "#00eaff",
                    200, "#00ffd5"
                ],
                "fill-extrusion-height": ["get", "height"],
                "fill-extrusion-opacity": 0.8
            }
        }, labelLayer?.id);
    }

    /* ======================================================
       CITY LIST
       ====================================================== */
    const cities = [
        { name: "Seoul", lng: 126.9780, lat: 37.5665, info: "the capital of South Korea. a high-tech hub" },
        { name: "New York", lng: -74.0060, lat: 40.7128, info: "the financial and cultural center of the United States" },
        { name: "Tokyo", lng: 139.6917, lat: 35.6895, info: "the capital and megacity of Japan" },

        /* ==== Ï∂îÍ∞ÄÎêú ÏàòÎèÑ ==== */
        { name: "London", lng: -0.1276, lat: 51.5074, info: "the capital of England. a financial and cultural center" },
        { name: "Paris", lng: 2.3522, lat: 48.8566, info: "the capital of France. a city of art and fashion" },
        { name: "Beijing", lng: 116.4074, lat: 39.9042, info: "the capital of China. the coexistence of history and modernity" },

        /* ==== üìå Ïó¨Í∏∞ Ï∂îÍ∞Ä! Í≥µÏ£ºÎåÄÌïôÍµê Ï≤úÏïàÏ∫†ÌçºÏä§ ==== */
        { name: "Kongju Univ (Cheonan)", lng: 127.1495, lat: 36.8512, info: "Located in Cheonan Campus of Gongju National University" }
    ];

    /* ======================================================
       ADD NEON MARKER
       ====================================================== */
    function addNeonMarker(city) {
        const el = document.createElement("div");
        el.className = "neon-marker";

        const ring = document.createElement("div");
        ring.className = "neon-ring";
        el.appendChild(ring);

        const popup = new mapboxgl.Popup({
            closeButton: false,
            closeOnClick: true,
            offset: 25
        }).setHTML(`<strong>${city.name}</strong><br>${city.info}`);

        el.addEventListener("click", () => {
            // ÌåùÏóÖ Ïó¥Í∏∞
            popup.setLngLat([city.lng, city.lat]).addTo(map);

            // üí† ÎßàÏª§ ÌÅ¥Î¶≠ Ïãú ÏûêÎèô Ïù¥Îèô
            map.flyTo({
                center: [city.lng, city.lat],
                zoom: 14.5,      // ÎèÑÏãú Ï£ºÎ≥ÄÍπåÏßÄ ÌôïÎåÄ
                pitch: 60,
                bearing: -20,
                speed: 0.7,
                curve: 1.5
            });
        });

        new mapboxgl.Marker(el)
            .setLngLat([city.lng, city.lat])
            .addTo(map);

        // üî• Ï§å Ïù¥Î≤§Ìä∏ÏóêÏÑú ÎßàÏª§ ÌëúÏãú/Ïà®Í∏∞Í∏∞
        map.on("zoom", () => {
            if (map.getZoom() >= 7) {
                el.style.display = "block";  // Î≥¥Ïó¨Ï£ºÍ∏∞
            } else {
                el.style.display = "none";   // Ïà®Í∏∞Í∏∞
            }
        });
    }

    /* ======================================================
       CLICK NEAR CITY ‚Üí OPEN POPUP
       (ÏïÑÏù¥ÏΩò Ïïà ÎàåÎü¨ÎèÑ Ìé∏ÌïòÍ≤å)
       ====================================================== */
    map.on("click", e => {
        cities.forEach(city => {
            const dist = Math.hypot(e.lngLat.lng - city.lng, e.lngLat.lat - city.lat);
            if (dist < 1.0) {
                new mapboxgl.Popup({ closeButton: false, offset: 25 })
                    .setLngLat([city.lng, city.lat])
                    .setHTML(`<strong>${city.name}</strong><br>${city.info}`)
                    .addTo(map);
            }
        });
    });

    /* ======================================================
       STYLE LOAD EVENTS
       ====================================================== */
    map.on("style.load", () => {
        setHolographicFog();
        addNeonBuildings();
        cities.forEach(addNeonMarker);
    });

    /* ======================================================
       COORD HUD UPDATE
       ====================================================== */
    map.on("move", () => {
        const c = map.getCenter();
        coords.textContent = `Lat: ${c.lat.toFixed(4)} | Lng: ${c.lng.toFixed(4)} | Zoom: ${map.getZoom().toFixed(2)}`;
    });
</script>

</body>
</html>
